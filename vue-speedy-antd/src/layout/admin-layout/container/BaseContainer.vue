<template>
    <a-layout class="base-container">
        <a-layout-header v-if="!hideHeader">
            <div class="base-container-header-left"
                 v-if="$slots['headerLeft']">
                <slot name="headerLeft"></slot>
            </div>
            <div class="base-container-header-left" v-else
                 @dblclick="handleHeaderDbClick">
                <a-breadcrumb>
                    <a-breadcrumb-item v-if="parentMenu">
                        <a-icon :type="parentMenu.icon" v-if="parentMenu.icon"/>
                        <span>{{parentMenu.name}}</span>
                    </a-breadcrumb-item>
                    <a-breadcrumb-item v-if="currentMenu">
                        <a-icon :type="currentMenu.icon" v-if="currentMenu.icon"/>
                        <span>{{currentMenu.name}}</span>
                    </a-breadcrumb-item>
                </a-breadcrumb>
            </div>
            <div class="base-container-header-right">
                <slot name="headerRight"></slot>
            </div>
        </a-layout-header>
        <a-layout-content ref="contentRef">
            <keep-alive>
                <div class="content-wrapper" :key="$route.fullPath">
                    <slot></slot>
                </div>
            </keep-alive>
        </a-layout-content>
        <a-layout-footer v-if="$slots['footer']">
            <slot name="footer"></slot>
        </a-layout-footer>
    </a-layout>
</template>

<script>
    import {Layout, Breadcrumb} from 'ant-design-vue'
    import './less/base-container.less'
    import {mapGetters} from "vuex";

    export default {
        name: "BaseContainer",
        components: {
            ALayout: Layout,
            ALayoutContent: Layout.Content,
            ALayoutHeader: Layout.Header,
            ALayoutFooter: Layout.Footer,
            ABreadcrumb: Breadcrumb,
            ABreadcrumbItem: Breadcrumb.Item,
        },
        props: {
            hideHeader: Boolean
        },
        mounted() {
        },
        computed: {
            ...mapGetters('menu', {
                currentMenu: 'currentGet',
                parentMenu: 'parentGet'
            }),
        },
        methods: {
            handleHeaderDbClick() {
                this.$emit('headerDbClick')
            }
        }
    }
</script>
<style>
</style>